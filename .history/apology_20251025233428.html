<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>For Rajjo — I'm Sorry 💌</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: 'Inter', sans-serif;
      min-height: 100vh;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      position: relative;
      overflow: hidden;
    }

    /* Animated background particles */
    .particles {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 1;
    }
    
    .particle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: rgba(255, 255, 255, 0.5);
      border-radius: 50%;
      animation: float 15s infinite ease-in-out;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0) translateX(0); opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { transform: translateY(-100vh) translateX(50px); opacity: 0; }
    }

    /* Main container */
    .container {
      position: relative;
      z-index: 10;
      width: 100%;
      max-width: 1200px;
      transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Lock screen */
    .lock-screen {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: 24px;
      padding: 60px 40px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      text-align: center;
      max-width: 500px;
      margin: 0 auto;
    }

    .lock-icon {
      width: 80px;
      height: 80px;
      margin: 0 auto 30px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .lock-screen h1 {
      font-family: 'Playfair Display', serif;
      font-size: 32px;
      color: #1a202c;
      margin-bottom: 12px;
    }

    .lock-screen p {
      color: #718096;
      font-size: 16px;
      margin-bottom: 30px;
      line-height: 1.6;
    }

    .hint-box {
      background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
      padding: 20px;
      border-radius: 16px;
      margin: 25px 0;
      box-shadow: 0 8px 20px rgba(253, 203, 110, 0.3);
    }

    .hint-box strong {
      display: block;
      color: #d63031;
      font-size: 14px;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .hint-box p {
      color: #2d3436;
      font-size: 15px;
      margin: 0;
    }

    .password-input {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin: 25px 0;
    }

    .password-input input {
      width: 60px;
      height: 70px;
      font-size: 32px;
      font-weight: bold;
      text-align: center;
      border: 3px solid #e2e8f0;
      border-radius: 12px;
      transition: all 0.3s;
      outline: none;
    }

    .password-input input:focus {
      border-color: #667eea;
      box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
    }

    .password-input input.error {
      border-color: #e74c3c;
      animation: shake 0.5s;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }

    .unlock-btn {
      width: 100%;
      padding: 16px;
      font-size: 18px;
      font-weight: 600;
      color: white;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
    }

    .unlock-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
    }

    .error-msg {
      color: #e74c3c;
      font-size: 14px;
      margin-top: 12px;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .error-msg.show {
      opacity: 1;
    }

    /* Letter content */
    .letter-content {
      display: none;
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(20px);
      border-radius: 24px;
      overflow: hidden;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    .letter-content.unlocked {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0;
      animation: fadeIn 0.8s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    .letter-left {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 60px 50px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      color: white;
      position: relative;
      overflow: hidden;
    }

    .letter-left::before {
      content: '';
      position: absolute;
      width: 300px;
      height: 300px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      top: -150px;
      right: -150px;
    }

    .envelope-animation {
      width: 200px;
      height: 200px;
      margin-bottom: 30px;
      position: relative;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }

    .envelope-animation svg {
      width: 100%;
      height: 100%;
      filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.2));
    }

    .letter-left h2 {
      font-family: 'Playfair Display', serif;
      font-size: 42px;
      margin-bottom: 16px;
      text-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }

    .letter-left p {
      font-size: 18px;
      opacity: 0.95;
      line-height: 1.6;
      max-width: 350px;
    }

    .letter-right {
      padding: 60px 50px;
      display: flex;
      flex-direction: column;
    }

    .letter-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 30px;
    }

    .letter-header h3 {
      font-family: 'Playfair Display', serif;
      font-size: 28px;
      color: #1a202c;
    }

    .music-controls {
      display: flex;
      gap: 10px;
    }

    .icon-btn {
      width: 44px;
      height: 44px;
      border: none;
      border-radius: 12px;
      background: #f7fafc;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      transition: all 0.3s;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    .icon-btn:hover {
      background: #667eea;
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(102, 126, 234, 0.3);
    }

    .icon-btn:hover::after {
      color: white;
    }

    .letter-text {
      flex: 1;
      background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
      border-radius: 16px;
      padding: 40px;
      font-family: 'Playfair Display', serif;
      font-size: 18px;
      line-height: 1.8;
      color: #2d3748;
      white-space: pre-wrap;
      box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.05);
      overflow-y: auto;
      max-height: 400px;
    }

    .letter-actions {
      display: flex;
      gap: 12px;
      margin-top: 30px;
      flex-wrap: wrap;
    }

    .action-btn {
      flex: 1;
      min-width: 140px;
      padding: 14px 24px;
      font-size: 15px;
      font-weight: 600;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      background: white;
      color: #4a5568;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .action-btn:hover {
      border-color: #667eea;
      color: #667eea;
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(102, 126, 234, 0.2);
    }

    .action-btn.primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
    }

    .action-btn.primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
    }

    /* Toast notification */
    .toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: #1a202c;
      color: white;
      padding: 16px 28px;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
      font-weight: 600;
      z-index: 1000;
      opacity: 0;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    /* Responsive */
    @media (max-width: 968px) {
      .letter-content.unlocked {
        grid-template-columns: 1fr;
      }
      
      .letter-left {
        padding: 50px 30px;
      }
      
      .letter-right {
        padding: 40px 30px;
      }

      .lock-screen {
        padding: 40px 30px;
      }
    }

    @media (max-width: 480px) {
      .password-input input {
        width: 50px;
        height: 60px;
        font-size: 28px;
      }

      .letter-actions {
        flex-direction: column;
      }

      .action-btn {
        width: 100%;
      }
    }

    /* Hidden canvas */
    canvas { display: none; }
  </style>
</head>
<body>
  <!-- Background particles -->
  <div class="particles" id="particles"></div>

  <div class="container">
    <!-- Lock Screen -->
    <div class="lock-screen" id="lockScreen">
      <div class="lock-icon">🔒</div>
      <h1>For Rajjo 💌</h1>
      <p>This letter is protected. To unlock it, solve the puzzle below:</p>
      
      <div class="hint-box">
        <strong>🎯 Hint:</strong>
        <p>Number of times I made you angry × Birth year of your favorite singer (Diljit Dosanjh)</p>
      </div>

      <div class="password-input">
        <input type="text" maxlength="1" id="digit1" />
        <input type="text" maxlength="1" id="digit2" />
        <input type="text" maxlength="1" id="digit3" />
        <input type="text" maxlength="1" id="digit4" />
        <input type="text" maxlength="1" id="digit5" />
      </div>

      <button class="unlock-btn" id="unlockBtn">Unlock Letter</button>
      <div class="error-msg" id="errorMsg">Incorrect code. Think again! 💭</div>
    </div>

    <!-- Letter Content (hidden initially) -->
    <div class="letter-content" id="letterContent">
      <div class="letter-left">
        <div class="envelope-animation">
          <svg viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="30" y="60" width="140" height="100" rx="8" fill="white" stroke="rgba(255,255,255,0.5)" stroke-width="2"/>
            <path d="M30 60 L100 110 L170 60" stroke="rgba(255,255,255,0.8)" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="100" cy="100" r="50" fill="rgba(255,255,255,0.1)"/>
            <text x="100" y="110" text-anchor="middle" fill="white" font-size="40">💌</text>
          </svg>
        </div>
        <h2>You Unlocked It!</h2>
        <p>Here's my heartfelt apology, written just for you.</p>
      </div>

      <div class="letter-right">
        <div class="letter-header">
          <h3>My Sincere Apology</h3>
          <div class="music-controls">
            <button class="icon-btn" id="musicBtn" title="Play/Pause Music">🔇</button>
          </div>
        </div>

        <div class="letter-text" id="letterText">Dear Rajjo,

I want to start by saying I'm really sorry for that stupid comment I made. I know it wasn't sensitive, and I can imagine it made you feel bad, which is honestly the last thing I ever wanted.

I mean seriously, how could I ever get the ick from you? Who am I even kidding? I've literally signed a lifelong contract with you. You're stuck with me forever, remember?

Please don't mind my stupid tongue. I have this annoying habit of saying dumb things without realizing the impact they might have. I never mean to hurt you, and if you're upset, then I'm upset too — and that's never a good combo for either of us.

I know I've made many mistakes (toooooo many), but I'm still learning how to be the perfect boyfriend for you. I promise I'm trying every single day, even when I mess up. I want to be the person who makes you smile when you wake up, who makes you feel safe and loved, and who always supports you — in the little things and the big things.

You mean so much to me, Rajjo!!! More than words can ever express. I love the way you laugh, the little things you notice, and even the way you smirk at me when I do something dumb. Those tiny moments are what make everything so special.

I want to be better for you — to listen more, tease less (okay maybe just a little 😏), and to make you feel as cherished as you make me feel every day. I can't promise I'll be perfect, but I can promise that I'll never stop trying, never stop loving, and never stop choosing you — because choosing you is honestly the easiest and best choice I've ever made.

So, please forgive my stupidity, my clumsy words, and my silly mistakes. Give me a little time to get a little better at being your bf baba? I'll get there. I'll learn, I'll grow, and I'll make you proud to have me — or at least laugh at me in the process 😅.

You're my favorite everything, Rajjo. I loveee uuu

— The asshole</div>

        <div class="letter-actions">
          <button class="action-btn primary" id="downloadBtn">
            <span>📥</span> Download
          </button>
          <button class="action-btn" id="copyBtn">
            <span>📋</span> Copy
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast notification -->
  <div class="toast" id="toast">Action completed! ✓</div>

  <!-- Hidden canvas for download -->
  <canvas id="canvas" width="1400" height="1000"></canvas>

  <!-- Audio element (replace with your music file) -->
  <audio id="bgAudio" src="Jaane Bhi De Heyy Babyy 128 Kbps.mp3" preload="auto"></audio>

  <script>
    // Generate floating particles
    const particlesContainer = document.getElementById('particles');
    for (let i = 0; i < 30; i++) {
      const particle = document.createElement('div');
      particle.className = 'particle';
      particle.style.left = Math.random() * 100 + '%';
      particle.style.animationDelay = Math.random() * 15 + 's';
      particle.style.animationDuration = (15 + Math.random() * 10) + 's';
      particlesContainer.appendChild(particle);
    }

    // Password verification (adjust the first number based on how many times you made her angry)
    const TIMES_ANGRY = 7; // Number of times you made Rajjo angry
    const SINGER_YEAR = 1984;
    const CORRECT_PASSWORD = String(TIMES_ANGRY * SINGER_YEAR); // 7 × 1984 = 13888

    const digit1 = document.getElementById('digit1');
    const digit2 = document.getElementById('digit2');
    const digit3 = document.getElementById('digit3');
    const digit4 = document.getElementById('digit4');
    const digit5 = document.getElementById('digit5');
    const unlockBtn = document.getElementById('unlockBtn');
    const errorMsg = document.getElementById('errorMsg');
    const lockScreen = document.getElementById('lockScreen');
    const letterContent = document.getElementById('letterContent');
    const inputs = [digit1, digit2, digit3, digit4, digit5];

    // Auto-focus next input
    inputs.forEach((input, index) => {
      input.addEventListener('input', (e) => {
        if (e.target.value.length === 1 && index < inputs.length - 1) {
          inputs[index + 1].focus();
        }
      });

      input.addEventListener('keydown', (e) => {
        if (e.key === 'Backspace' && !e.target.value && index > 0) {
          inputs[index - 1].focus();
        }
        if (e.key === 'Enter') {
          unlockBtn.click();
        }
      });
    });

    // Unlock function
    function unlockLetter() {
      const enteredPassword = digit1.value + digit2.value + digit3.value + digit4.value + digit5.value;
      
      if (enteredPassword === CORRECT_PASSWORD) {
        lockScreen.style.display = 'none';
        letterContent.classList.add('unlocked');
        showToast('Letter unlocked! 💖');
      } else {
        errorMsg.classList.add('show');
        inputs.forEach(input => {
          input.classList.add('error');
          input.value = '';
        });
        setTimeout(() => {
          inputs.forEach(input => input.classList.remove('error'));
          errorMsg.classList.remove('show');
        }, 2000);
        digit1.focus();
      }
    }

    unlockBtn.addEventListener('click', unlockLetter);

    // Letter functionality

    // Copy letter
    copyBtn.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(letterText.textContent.trim());
        showToast('Copied to clipboard! 📋');
      } catch (e) {
        showToast('Copy failed - please select and copy manually');
      }
    });

    // Download as image
    downloadBtn.addEventListener('click', () => {
      const ctx = canvas.getContext('2d');
      const W = 1400, H = 1000;

      // Background gradient
      const grad = ctx.createLinearGradient(0, 0, W, H);
      grad.addColorStop(0, '#667eea');
      grad.addColorStop(1, '#764ba2');
      ctx.fillStyle = grad;
      ctx.fillRect(0, 0, W, H);

      // White paper
      ctx.fillStyle = 'white';
      ctx.shadowColor = 'rgba(0,0,0,0.3)';
      ctx.shadowBlur = 40;
      roundRect(ctx, 100, 100, W - 200, H - 200, 20);
      ctx.fill();
      ctx.shadowBlur = 0;

      // Title
      ctx.fillStyle = '#667eea';
      ctx.font = 'bold 48px "Playfair Display", serif';
      ctx.fillText('For Rajjo 💌', 150, 200);

      // Letter content
      ctx.fillStyle = '#2d3748';
      ctx.font = '32px "Playfair Display", serif';
      const lines = letterText.textContent.trim().split('\n');
      let y = 280;
      lines.forEach(line => {
        const words = line.split(' ');
        let currentLine = '';
        words.forEach(word => {
          const testLine = currentLine + word + ' ';
          if (ctx.measureText(testLine).width < W - 300) {
            currentLine = testLine;
          } else {
            ctx.fillText(currentLine, 150, y);
            currentLine = word + ' ';
            y += 50;
          }
        });
        ctx.fillText(currentLine, 150, y);
        y += 50;
      });

      // Download
      const link = document.createElement('a');
      link.download = 'for_rajjo_apology.png';
      link.href = canvas.toDataURL();
      link.click();
      showToast('Downloaded! 📥');
    });

    function roundRect(ctx, x, y, w, h, r) {
      ctx.beginPath();
      ctx.moveTo(x + r, y);
      ctx.lineTo(x + w - r, y);
      ctx.quadraticCurveTo(x + w, y, x + w, y + r);
      ctx.lineTo(x + w, y + h - r);
      ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
      ctx.lineTo(x + r, y + h);
      ctx.quadraticCurveTo(x, y + h, x, y + h - r);
      ctx.lineTo(x, y + r);
      ctx.quadraticCurveTo(x, y, x + r, y);
      ctx.closePath();
    }

    // Music control
    musicBtn.addEventListener('click', () => {
      if (!bgAudio.src) {
        showToast('Add your music file to play! 🎵');
        return;
      }

      if (bgAudio.paused) {
        bgAudio.play();
        musicBtn.textContent = '🔊';
      } else {
        bgAudio.pause();
        musicBtn.textContent = '🔇';
      }
    });

    bgAudio.addEventListener('ended', () => {
      musicBtn.textContent = '🔇';
    });

    // Toast notification
    function showToast(message) {
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // Focus first input on load
    digit1.focus();
  </script>
</body>
</html>